# 4.1 网络层提供的两种服务
{: id="20201208083835-yisl3gk"}

在计算机网络领域，网络层应该向运输层提供怎样的服务（“面向连接”还是“无连接”）曾引起了长期的争论。争论焦点的实质就是：在计算机通信中，可靠交付应当由谁来负责？是网络还是端系统？
{: id="20201208083835-848v0mw"}

![41.png](assets/20201207212727-xryc463-4-1.png)
{: id="20201208083835-fvdadq4"}

**网络层向上只提供简单灵活的、无连接的、尽最大努力交付的数据报服务**。网络在发送分组时不需要先建立连接。每一个分组（也就是 IP 数据报）独立发送，与其前后的分组无关（不进行编号）。**网络层不提供服务质量的承诺**。也就是说，所传送的分组可能出错、丢失、重复和失序（即不按序到达终点），当然也不保证分组交付的时限。
{: id="20201208083835-o30vt3n"}

![411.png](assets/20201207212855-knqkf9n-4-11.png)
{: id="20201208083835-47h7v94"}

# 4.2 网际协议 IP
{: id="20201208083835-5kg5pvk"}

网际协议 IP 是 TCP/IP 体系中两个最主要的协议之一[STEV94][COME06][FORO10]，也是最重要的因特网标准协议之一。与 IP 协议配套使用的还有三个协议：
{: id="20201208083835-i0a5h39"}

- {: id="20201208083835-grtq9hm"}**地址解析协议 ARP**(Address Resolution Protocol)
- {: id="20201208083835-5dljdrs"}**网际控制报文协议 ICMP** (Internet Control Message Protocol)
- {: id="20201208083835-aqzby65"}**网际组管理协议 IGMP** (Internet Group Management Protocol)
{: id="20201208083835-1pghmvf"}

图 4-2 画出了这三个协议和网际协议 IP 的关系。在这一层中，ARP 画在最下面，因为 IP 经常要使用这个协议。ICMP 和 IGMP 画在这一层的上部，因为它们要使用 IP 协议。这三个协议将在后面陆续介绍。由于网际协议 IP 是用来使互连起来的许多计算机网络能够进行通信，因此 TCP/IP 体系中的网络层常常称为**网际层(internetlayer)**，或 **IP 层**。
{: id="20201208083835-uyeru67"}

![42.png](assets/20201207213052-ivtb8vi-4-2.png)
{: id="20201208083835-i6yotiu"}

### 4.2.1 虚拟互连网络
{: id="20201208083835-pl12i6d"}

从一般的概念来讲，将网络互相连接起来要使用一些中间设备。根据中间设备所在的层次，可以有以下四种不同的中间设备：
{: id="20201208090642-rtwuaiu"}

1. {: id="20201208090716-4vhloh6"}物理层使用的中间设备叫做转发器(repeater)。
2. {: id="20201208090719-iy1runw"}数据链路层使用的中间设备叫做网桥或桥接器(bridge)。
3. {: id="20201208090725-ohv2c9n"}网络层使用的中间设备叫做路由器(router)[插图]。
4. {: id="20201208090731-ycu2vo3"}在网络层以上使用的中间设备叫做网关(gateway)。用网关连接两个不兼容的系统需要在高层进行协议的转换。
{: id="20201208090711-fuuf220"}

{: id="20201208090734-a3r4b4y"}
